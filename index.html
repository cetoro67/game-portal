<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PIXELPLAY - Play Free Games Online</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght:700;900&family=Exo+2:wght@400;600&display=swap');

        :root {
            --neon-blue: #00f3ff;
            --neon-pink: #ff00aa;
            --neon-green: #39ff14;
            --neon-purple: #b026ff;
            --neon-orange: #ff6600;
            --dark-bg: #0a0e27;
            --darker-bg: #050811;
            --card-bg: #12172e;
            --text-primary: #ffffff;
            --text-secondary: #a0a8c4;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Exo 2', sans-serif;
            background: var(--dark-bg);
            color: var(--text-primary);
            overflow-x: hidden;
            position: relative;
        }

        /* Animated background grid */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                linear-gradient(rgba(0, 243, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 243, 255, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            pointer-events: none;
            z-index: 0;
            animation: gridMove 20s linear infinite;
        }

        @keyframes gridMove {
            0% { transform: translateY(0); }
            100% { transform: translateY(50px); }
        }

        /* Header */
        header {
            position: relative;
            padding: 1.5rem 2rem;
            background: rgba(5, 8, 17, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 2px solid var(--neon-blue);
            box-shadow: 0 0 20px rgba(0, 243, 255, 0.3);
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--neon-blue), var(--neon-pink), var(--neon-green));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(0, 243, 255, 0.5);
            letter-spacing: 3px;
            animation: logoGlow 2s ease-in-out infinite alternate;
        }

        @keyframes logoGlow {
            0% { filter: drop-shadow(0 0 10px rgba(0, 243, 255, 0.6)); }
            100% { filter: drop-shadow(0 0 25px rgba(255, 0, 170, 0.8)); }
        }

        /* Achievements Button */
        .achievements-btn {
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            font-weight: 700;
            padding: 0.8rem 1.5rem;
            background: var(--card-bg);
            border: 2px solid var(--neon-purple);
            border-radius: 10px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .achievements-btn:hover {
            border-color: var(--neon-pink);
            box-shadow: 0 0 25px rgba(255, 0, 170, 0.4);
            transform: translateY(-2px);
        }

        /* Hero Section */
        .hero {
            position: relative;
            padding: 6rem 2rem 4rem;
            text-align: center;
            background: linear-gradient(135deg, rgba(176, 38, 255, 0.1) 0%, rgba(0, 243, 255, 0.1) 100%);
            border-bottom: 3px solid var(--neon-purple);
            overflow: hidden;
            z-index: 1;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(0, 243, 255, 0.1) 0%, transparent 70%);
            animation: heroRotate 15s linear infinite;
        }

        @keyframes heroRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .hero-content {
            position: relative;
            z-index: 2;
        }

        .hero h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 4rem;
            font-weight: 900;
            margin-bottom: 1rem;
            text-transform: uppercase;
            background: linear-gradient(90deg, var(--neon-pink), var(--neon-blue), var(--neon-green), var(--neon-pink));
            background-size: 300% 100%;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientSlide 5s ease infinite;
            text-shadow: 0 0 40px rgba(255, 0, 170, 0.5);
        }

        @keyframes gradientSlide {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .hero p {
            font-size: 1.3rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto;
            text-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }

        /* Container */
        .container {
            position: relative;
            max-width: 1400px;
            margin: 0 auto;
            padding: 3rem 2rem;
            z-index: 1;
        }

        /* Search & Filters */
        .controls {
            margin-bottom: 3rem;
        }

        .search-box {
            position: relative;
            margin-bottom: 2rem;
        }

        .search-box input {
            width: 100%;
            padding: 1.2rem 1.5rem;
            font-size: 1.1rem;
            font-family: 'Exo 2', sans-serif;
            background: var(--card-bg);
            border: 2px solid var(--neon-blue);
            border-radius: 12px;
            color: var(--text-primary);
            outline: none;
            transition: all 0.3s ease;
            box-shadow: 0 0 20px rgba(0, 243, 255, 0.2);
        }

        .search-box input:focus {
            border-color: var(--neon-pink);
            box-shadow: 0 0 30px rgba(255, 0, 170, 0.4);
            transform: translateY(-2px);
        }

        .search-box input::placeholder {
            color: var(--text-secondary);
        }

        /* Category Filters */
        .filters {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .filter-btn {
            padding: 0.8rem 1.8rem;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.95rem;
            font-weight: 700;
            background: var(--card-bg);
            border: 2px solid var(--neon-purple);
            border-radius: 8px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .filter-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: radial-gradient(circle, rgba(176, 38, 255, 0.4), transparent);
            transform: translate(-50%, -50%);
            transition: width 0.4s ease, height 0.4s ease;
            border-radius: 50%;
        }

        .filter-btn:hover {
            border-color: var(--neon-pink);
            box-shadow: 0 0 25px rgba(255, 0, 170, 0.4);
            transform: translateY(-3px);
        }

        .filter-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .filter-btn.active {
            background: linear-gradient(135deg, var(--neon-pink), var(--neon-purple));
            border-color: var(--neon-pink);
            box-shadow: 0 0 30px rgba(255, 0, 170, 0.6);
        }

        .filter-btn span {
            position: relative;
            z-index: 1;
        }

        /* Section Headers */
        .section-header {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            margin: 3rem 0 2rem;
            padding-left: 1.5rem;
            border-left: 5px solid var(--neon-blue);
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--neon-blue);
            text-shadow: 0 0 20px rgba(0, 243, 255, 0.5);
        }

        /* Games Grid */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .game-card {
            position: relative;
            background: var(--card-bg);
            border-radius: 16px;
            overflow: hidden;
            border: 2px solid transparent;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            animation: cardFadeIn 0.6s ease backwards;
        }

        .game-card:nth-child(1) { animation-delay: 0.05s; }
        .game-card:nth-child(2) { animation-delay: 0.1s; }
        .game-card:nth-child(3) { animation-delay: 0.15s; }
        .game-card:nth-child(4) { animation-delay: 0.2s; }
        .game-card:nth-child(5) { animation-delay: 0.25s; }
        .game-card:nth-child(6) { animation-delay: 0.3s; }

        @keyframes cardFadeIn {
            0% {
                opacity: 0;
                transform: translateY(30px) scale(0.9);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .game-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(0, 243, 255, 0.1), rgba(255, 0, 170, 0.1));
            opacity: 0;
            transition: opacity 0.4s ease;
            z-index: 1;
        }

        .game-card:hover {
            transform: translateY(-10px) scale(1.02);
            border-color: var(--neon-pink);
            box-shadow:
                0 20px 40px rgba(0, 0, 0, 0.5),
                0 0 40px rgba(255, 0, 170, 0.4),
                inset 0 0 20px rgba(255, 0, 170, 0.1);
        }

        .game-card:hover::before {
            opacity: 1;
        }

        .game-thumbnail {
            position: relative;
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, var(--neon-purple), var(--neon-blue));
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .game-thumbnail::after {
            content: 'PLAY';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            font-family: 'Orbitron', sans-serif;
            font-size: 3rem;
            font-weight: 900;
            color: white;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
            opacity: 0;
            transition: all 0.4s ease;
            z-index: 2;
        }

        .game-card:hover .game-thumbnail::after {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
        }

        .game-thumbnail svg {
            width: 80px;
            height: 80px;
            opacity: 0.3;
            transition: all 0.4s ease;
        }

        .game-card:hover .game-thumbnail svg {
            transform: scale(1.3);
            opacity: 0.1;
        }

        .game-logo {
            max-width: 80%;
            max-height: 80%;
            object-fit: contain;
            position: relative;
            z-index: 1;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
            transition: all 0.4s ease;
        }

        .game-card:hover .game-logo {
            transform: scale(1.1);
            filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.5));
        }

        .game-info {
            position: relative;
            padding: 1.5rem;
            z-index: 2;
        }

        .game-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .game-category {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            font-size: 0.8rem;
            font-weight: 600;
            background: rgba(0, 243, 255, 0.2);
            border: 1px solid var(--neon-blue);
            border-radius: 6px;
            color: var(--neon-blue);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Badge for popular/new */
        .badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            padding: 0.5rem 1rem;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.75rem;
            font-weight: 700;
            background: var(--neon-pink);
            color: white;
            border-radius: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
            z-index: 3;
            box-shadow: 0 0 20px rgba(255, 0, 170, 0.6);
            animation: badgePulse 2s ease-in-out infinite;
        }

        .badge.new {
            background: var(--neon-green);
            box-shadow: 0 0 20px rgba(57, 255, 20, 0.6);
        }

        @keyframes badgePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* No results message */
        .no-results {
            text-align: center;
            padding: 4rem 2rem;
            font-size: 1.3rem;
            color: var(--text-secondary);
            display: none;
        }

        .no-results.show {
            display: block;
        }

        /* Achievements Modal */
        .achievements-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .achievements-modal.show {
            display: flex;
        }

        .modal-content {
            background: var(--card-bg);
            border: 2px solid var(--neon-purple);
            border-radius: 16px;
            padding: 2rem;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 0 40px rgba(176, 38, 255, 0.6);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--neon-blue);
        }

        .modal-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--neon-blue), var(--neon-pink));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 2rem;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-btn:hover {
            color: var(--neon-pink);
            transform: rotate(90deg);
        }

        .user-stats {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: rgba(0, 243, 255, 0.1);
            border: 1px solid var(--neon-blue);
            border-radius: 12px;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-family: 'Exo 2', sans-serif;
        }

        .stat-label {
            color: var(--text-secondary);
        }

        .stat-value {
            color: var(--neon-blue);
            font-weight: 700;
        }

        .xp-progress {
            margin-top: 1rem;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: var(--darker-bg);
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid var(--neon-purple);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--neon-blue), var(--neon-pink));
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(0, 243, 255, 0.6);
        }

        .progress-text {
            text-align: center;
            margin-top: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .achievements-section {
            margin-top: 2rem;
        }

        .section-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--neon-green);
        }

        .achievement-item {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            margin-bottom: 0.5rem;
            background: rgba(176, 38, 255, 0.1);
            border: 1px solid var(--neon-purple);
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .achievement-item.locked {
            opacity: 0.5;
            background: rgba(160, 168, 196, 0.1);
            border-color: var(--text-secondary);
        }

        .achievement-item:not(.locked):hover {
            transform: translateX(5px);
            box-shadow: 0 0 15px rgba(176, 38, 255, 0.4);
        }

        .achievement-icon {
            font-size: 2rem;
            filter: grayscale(100%);
        }

        .achievement-item:not(.locked) .achievement-icon {
            filter: grayscale(0%);
        }

        .achievement-info {
            flex: 1;
        }

        .achievement-name {
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 0.3rem;
        }

        .achievement-desc {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .achievement-xp {
            color: var(--neon-green);
            font-weight: 700;
            align-self: center;
        }

        /* Popup Notification */
        .popup-notification {
            position: fixed;
            top: 100px;
            right: 2rem;
            background: var(--card-bg);
            border: 2px solid var(--neon-pink);
            border-radius: 12px;
            padding: 1.5rem;
            min-width: 300px;
            box-shadow: 0 0 30px rgba(255, 0, 170, 0.6);
            z-index: 2000;
            display: none;
            animation: slideIn 0.5s ease;
        }

        .popup-notification.show {
            display: block;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .popup-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .popup-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--neon-pink);
        }

        .popup-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .popup-close:hover {
            color: var(--neon-pink);
        }

        .popup-body {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .popup-icon {
            font-size: 3rem;
        }

        .popup-text {
            flex: 1;
        }

        .popup-name {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 0.3rem;
        }

        .popup-desc {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Footer */
        footer {
            position: relative;
            margin-top: 4rem;
            padding: 2rem;
            text-align: center;
            background: var(--darker-bg);
            border-top: 2px solid var(--neon-purple);
            color: var(--text-secondary);
            z-index: 1;
        }

        footer p {
            font-size: 0.95rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5rem;
            }

            .hero p {
                font-size: 1.1rem;
            }

            .section-header {
                font-size: 1.5rem;
            }

            .games-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 1.5rem;
            }

            .filters {
                gap: 0.7rem;
            }

            .filter-btn {
                padding: 0.6rem 1.2rem;
                font-size: 0.85rem;
            }
        }

        @media (max-width: 480px) {
            .hero h1 {
                font-size: 2rem;
            }

            .games-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">‚ö° PIXELPLAY</div>
        <button class="achievements-btn" id="achievementsBtn">
            üèÜ <span id="userLevel">Level 1</span>
        </button>
    </header>

    <section class="hero">
        <div class="hero-content">
            <h1>Play Free Games Online</h1>
            <p>Thousands of games waiting for you. No downloads. Just pure gaming fun.</p>
        </div>
    </section>

    <div class="container">
        <div class="controls">
            <div class="search-box">
                <input
                    type="text"
                    id="searchInput"
                    placeholder="üîç Search for games..."
                    autocomplete="off"
                >
            </div>

            <div class="filters">
                <button class="filter-btn active" data-category="all">
                    <span>All Games</span>
                </button>
                <button class="filter-btn" data-category="action">
                    <span>Action</span>
                </button>
                <button class="filter-btn" data-category="puzzle">
                    <span>Puzzle</span>
                </button>
                <button class="filter-btn" data-category="racing">
                    <span>Racing</span>
                </button>
                <button class="filter-btn" data-category="sport">
                    <span>Sport</span>
                </button>
                <button class="filter-btn" data-category="adventure">
                    <span>Adventure</span>
                </button>
            </div>
        </div>

        <h2 class="section-header">üî• Popular Games</h2>
        <div class="games-grid" id="gamesContainer"></div>

        <div class="no-results" id="noResults">
            No games found. Try a different search term or category.
        </div>
    </div>

    <footer>
        <p>&copy; 2026 PIXELPLAY - Play Free Games Online | All rights reserved</p>
    </footer>

    <!-- Achievements Modal -->
    <div class="achievements-modal" id="achievementsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">üèÜ Achievements</h2>
                <button class="close-btn" id="closeModal">√ó</button>
            </div>

            <div class="user-stats">
                <div class="stat-row">
                    <span class="stat-label">Level:</span>
                    <span class="stat-value" id="modalLevel">1</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Total XP:</span>
                    <span class="stat-value" id="modalXP">0</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Games Played:</span>
                    <span class="stat-value" id="modalGamesPlayed">0</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Time on Site:</span>
                    <span class="stat-value" id="modalTimeSpent">0 min</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Current Streak:</span>
                    <span class="stat-value" id="modalStreak">0 days</span>
                </div>

                <div class="xp-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                    </div>
                    <p class="progress-text" id="progressText">0 / 100 XP to Level 2</p>
                </div>
            </div>

            <div class="achievements-section">
                <h3 class="section-title">Achievements</h3>
                <div id="achievementsList"></div>
            </div>
        </div>
    </div>

    <!-- Popup Notification -->
    <div class="popup-notification" id="popupNotification">
        <div class="popup-header">
            <span class="popup-title" id="popupTitle">Achievement Unlocked!</span>
            <button class="popup-close" id="popupClose">√ó</button>
        </div>
        <div class="popup-body">
            <div class="popup-icon" id="popupIcon">üèÜ</div>
            <div class="popup-text">
                <div class="popup-name" id="popupName">First Game</div>
                <div class="popup-desc" id="popupDesc">You played your first game!</div>
            </div>
        </div>
    </div>

    <script>
        // Game data - Real open-source games!
        const games = [
            { id: 1, title: "2048", category: "puzzle", badge: "popular", url: "games/2048/index.html", thumbnail: "games/2048/meta/apple-touch-icon.png", bg: "games/2048/meta/apple-touch-startup-image-640x1096.png" },
            { id: 2, title: "Clumsy Bird", category: "action", badge: "popular", url: "games/clumsy-bird/index.html", thumbnail: "games/clumsy-bird/data/img/logo.png", bg: "games/clumsy-bird/data/img/bg.png" },
            { id: 3, title: "HexGL", category: "racing", badge: "popular", url: "games/hexgl/index.html", thumbnail: "games/hexgl/css/title.png", bg: "games/hexgl/css/bg.jpg" },
            { id: 4, title: "Tetris", category: "puzzle", badge: "popular", url: "games/tetris/index.html", thumbnail: "games/tetris/logo.svg", bg: "games/tetris/background.svg" },
            { id: 5, title: "We Become What We Behold", category: "adventure", badge: "popular", url: "games/wbwwb/index.html", thumbnail: "games/wbwwb/Persian-CoverImage.png", bg: "games/wbwwb/sprites/bg.png" },

            // GameDistribution Games
            { id: 6, title: "Survive the Night", category: "action", badge: "popular", url: "https://html5.gamedistribution.com/2a7a74f769ea40babd7d55ed7704af44/", thumbnail: "https://img.gamedistribution.com/2a7a74f769ea40babd7d55ed7704af44-1280x720.jpg", bg: "https://img.gamedistribution.com/2a7a74f769ea40babd7d55ed7704af44-1280x720.jpg" },
            { id: 7, title: "Wave Dash", category: "action", badge: "popular", url: "https://html5.gamedistribution.com/50d154abb6c5483b847cbeea848e73ff/", thumbnail: "https://img.gamedistribution.com/50d154abb6c5483b847cbeea848e73ff-1280x720.jpg", bg: "https://img.gamedistribution.com/50d154abb6c5483b847cbeea848e73ff-1280x720.jpg" }
        ];

        let currentCategory = 'all';
        let searchTerm = '';

        // SVG icon for game thumbnails
        const gameIcon = `
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </svg>
        `;

        // Render games
        function renderGames() {
            const container = document.getElementById('gamesContainer');
            const noResults = document.getElementById('noResults');

            const filteredGames = games.filter(game => {
                const matchesCategory = currentCategory === 'all' || game.category === currentCategory;
                const matchesSearch = game.title.toLowerCase().includes(searchTerm.toLowerCase());
                return matchesCategory && matchesSearch;
            });

            if (filteredGames.length === 0) {
                container.innerHTML = '';
                noResults.classList.add('show');
                return;
            }

            noResults.classList.remove('show');

            container.innerHTML = filteredGames.map(game => `
                <div class="game-card" onclick="playGame('${game.title}', '${game.url}')">
                    ${game.badge ? `<div class="badge ${game.badge === 'new' ? 'new' : ''}">${game.badge === 'new' ? 'New' : 'Popular'}</div>` : ''}
                    <div class="game-thumbnail" style="${game.bg ? `background-image: url('${game.bg}'); background-size: cover; background-position: center;` : ''}">
                        ${game.thumbnail ? `<img src="${game.thumbnail}" alt="${game.title}" class="game-logo">` : gameIcon}
                    </div>
                    <div class="game-info">
                        <div class="game-title">${game.title}</div>
                        <div class="game-category">${game.category}</div>
                    </div>
                </div>
            `).join('');
        }

        // Category filter
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentCategory = btn.dataset.category;
                renderGames();
            });
        });

        // Search
        document.getElementById('searchInput').addEventListener('input', (e) => {
            searchTerm = e.target.value;
            renderGames();
        });

        // Play game function
        function playGame(title, url) {
            // Track game play for achievements
            const gameId = games.find(g => g.title === title)?.id;
            if (gameId) {
                achievementSystem.playGame(gameId, games.find(g => g.id === gameId).category);
            }
            // Open game in new tab
            window.open(url, '_blank');
        }

        // Initial render
        renderGames();

        // ========== ACHIEVEMENT SYSTEM ==========
        const achievementSystem = {
            // Achievement definitions
            achievements: [
                {
                    id: 'first_game',
                    name: 'First Game',
                    description: 'Play your first game',
                    icon: 'üéÆ',
                    xpReward: 100,
                    check: (data) => data.gamesPlayed.length >= 1
                },
                {
                    id: 'action_fan',
                    name: 'Action Fan',
                    description: 'Play 3 action games',
                    icon: '‚ö°',
                    xpReward: 100,
                    check: (data) => data.gamesPlayed.filter(g => {
                        const game = games.find(gm => gm.id === g.gameId);
                        return game && game.category === 'action';
                    }).length >= 3
                },
                {
                    id: 'puzzle_master',
                    name: 'Puzzle Master',
                    description: 'Play 3 puzzle games',
                    icon: 'üß©',
                    xpReward: 100,
                    check: (data) => data.gamesPlayed.filter(g => {
                        const game = games.find(gm => gm.id === g.gameId);
                        return game && game.category === 'puzzle';
                    }).length >= 3
                },
                {
                    id: 'game_master',
                    name: 'Game Master',
                    description: 'Play all 7 games',
                    icon: 'üëë',
                    xpReward: 500,
                    check: (data) => {
                        const uniqueGames = new Set(data.gamesPlayed.map(g => g.gameId));
                        return uniqueGames.size >= 7;
                    }
                },
                {
                    id: 'daily_player',
                    name: 'Daily Player',
                    description: 'Visit 3 days in a row',
                    icon: 'üî•',
                    xpReward: 200,
                    check: (data) => data.currentStreak >= 3
                }
            ],

            // Level XP requirements (exponential)
            levelXP: [
                0,      // Level 1
                100,    // Level 2
                250,    // Level 3
                450,    // Level 4
                700,    // Level 5
                1000,   // Level 6
                1400,   // Level 7
                1900,   // Level 8
                2500,   // Level 9
                3200,   // Level 10
                4000,   // Level 11
                5000,   // Level 12
                6200,   // Level 13
                7600,   // Level 14
                9200,   // Level 15
                11000,  // Level 16
                13000,  // Level 17
                15200,  // Level 18
                17600,  // Level 19
                20200   // Level 20
            ],

            // Get user data from localStorage
            getData() {
                const defaultData = {
                    xp: 0,
                    level: 1,
                    gamesPlayed: [],
                    achievements: [],
                    totalTimeSpent: 0,
                    lastVisit: Date.now(),
                    currentStreak: 1,
                    sessionStartTime: Date.now(),
                    todayTimeSpent: 0,
                    lastStreakUpdate: new Date().toDateString()
                };
                const saved = localStorage.getItem('pixelplay_progress');
                return saved ? { ...defaultData, ...JSON.parse(saved) } : defaultData;
            },

            // Save user data to localStorage
            saveData(data) {
                localStorage.setItem('pixelplay_progress', JSON.stringify(data));
            },

            // Add XP and check for level up
            addXP(amount) {
                const data = this.getData();
                const oldLevel = data.level;
                data.xp += amount;

                // Check for level up
                while (data.level < this.levelXP.length && data.xp >= this.levelXP[data.level]) {
                    data.level++;
                }

                this.saveData(data);
                this.updateUI();

                // Show level up notification
                if (data.level > oldLevel) {
                    this.showNotification('üéâ Level Up!', `You reached Level ${data.level}!`, 'üéä', true);
                }

                return data.level > oldLevel;
            },

            // Track game play
            playGame(gameId, category) {
                const data = this.getData();
                const now = Date.now();
                const cooldown = 15 * 60 * 1000; // 15 minutes

                // Check if game was played recently
                const lastPlay = data.gamesPlayed.find(g => g.gameId === gameId);
                if (lastPlay && (now - lastPlay.lastPlayed) < cooldown) {
                    console.log('Game on cooldown, no XP awarded');
                    return;
                }

                // Update or add game play
                if (lastPlay) {
                    lastPlay.lastPlayed = now;
                    lastPlay.playCount = (lastPlay.playCount || 1) + 1;
                } else {
                    data.gamesPlayed.push({
                        gameId: gameId,
                        category: category,
                        lastPlayed: now,
                        playCount: 1
                    });
                }

                // Award XP
                this.addXP(50);
                this.saveData(data);
                this.checkAchievements();
            },

            // Check and unlock achievements
            checkAchievements() {
                const data = this.getData();
                let newAchievements = false;

                this.achievements.forEach(achievement => {
                    if (!data.achievements.includes(achievement.id) && achievement.check(data)) {
                        data.achievements.push(achievement.id);
                        this.addXP(achievement.xpReward);
                        this.showNotification('Achievement Unlocked!', achievement.name, achievement.icon, false, achievement.description);
                        newAchievements = true;
                    }
                });

                if (newAchievements) {
                    this.saveData(data);
                    this.updateUI();
                }
            },

            // Show popup notification
            showNotification(title, name, icon, isLevelUp, description = '') {
                const popup = document.getElementById('popupNotification');
                document.getElementById('popupTitle').textContent = title;
                document.getElementById('popupName').textContent = name;
                document.getElementById('popupIcon').textContent = icon;
                document.getElementById('popupDesc').textContent = description || (isLevelUp ? `Congratulations on reaching ${name}!` : '');

                popup.classList.add('show');
            },

            // Update UI elements
            updateUI() {
                const data = this.getData();

                // Update header level
                document.getElementById('userLevel').textContent = `Level ${data.level}`;

                // Update modal stats
                document.getElementById('modalLevel').textContent = data.level;
                document.getElementById('modalXP').textContent = data.xp;

                const uniqueGames = new Set(data.gamesPlayed.map(g => g.gameId));
                document.getElementById('modalGamesPlayed').textContent = uniqueGames.size;

                const totalMinutes = Math.floor(data.totalTimeSpent / 60);
                document.getElementById('modalTimeSpent').textContent = `${totalMinutes} min`;
                document.getElementById('modalStreak').textContent = `${data.currentStreak} days`;

                // Update progress bar
                const currentLevelXP = this.levelXP[data.level - 1] || 0;
                const nextLevelXP = this.levelXP[data.level] || this.levelXP[this.levelXP.length - 1];
                const xpInLevel = data.xp - currentLevelXP;
                const xpForLevel = nextLevelXP - currentLevelXP;
                const progress = (xpInLevel / xpForLevel) * 100;

                document.getElementById('progressFill').style.width = `${Math.min(progress, 100)}%`;
                document.getElementById('progressText').textContent =
                    data.level >= this.levelXP.length
                    ? 'Max Level!'
                    : `${xpInLevel} / ${xpForLevel} XP to Level ${data.level + 1}`;

                // Update achievements list
                this.renderAchievements();
            },

            // Render achievements in modal
            renderAchievements() {
                const data = this.getData();
                const list = document.getElementById('achievementsList');

                list.innerHTML = this.achievements.map(achievement => {
                    const unlocked = data.achievements.includes(achievement.id);
                    return `
                        <div class="achievement-item ${unlocked ? '' : 'locked'}">
                            <div class="achievement-icon">${achievement.icon}</div>
                            <div class="achievement-info">
                                <div class="achievement-name">${achievement.name}</div>
                                <div class="achievement-desc">${achievement.description}</div>
                            </div>
                            <div class="achievement-xp">+${achievement.xpReward} XP</div>
                        </div>
                    `;
                }).join('');
            },

            // Track time on site
            startTimeTracking() {
                const data = this.getData();
                data.sessionStartTime = Date.now();
                this.saveData(data);

                // Update time every minute
                setInterval(() => {
                    const data = this.getData();
                    const sessionTime = Math.floor((Date.now() - data.sessionStartTime) / 1000);
                    data.totalTimeSpent += 60;
                    data.todayTimeSpent += 60;

                    // Award XP for time (10 XP per minute)
                    if (sessionTime % 60 === 0) {
                        this.addXP(10);
                    }

                    this.saveData(data);
                    this.updateUI();
                }, 60000); // Every minute
            },

            // Update streak
            updateStreak() {
                const data = this.getData();
                const today = new Date().toDateString();
                const lastUpdate = data.lastStreakUpdate || today;

                if (lastUpdate !== today) {
                    const lastDate = new Date(lastUpdate);
                    const currentDate = new Date(today);
                    const diffTime = currentDate - lastDate;
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

                    if (diffDays === 1) {
                        // Consecutive day - increment streak if spent 5+ minutes
                        const yesterdayTime = data.todayTimeSpent || 0;
                        if (yesterdayTime >= 300) { // 5 minutes in seconds
                            data.currentStreak++;
                        } else {
                            data.currentStreak = 1;
                        }
                    } else if (diffDays > 1) {
                        // Missed a day - reset streak
                        data.currentStreak = 1;
                    }

                    data.lastStreakUpdate = today;
                    data.todayTimeSpent = 0;
                    this.saveData(data);
                    this.checkAchievements();
                }
            },

            // Initialize system
            init() {
                this.updateStreak();
                this.startTimeTracking();
                this.updateUI();
                this.checkAchievements();

                // Modal controls
                document.getElementById('achievementsBtn').addEventListener('click', () => {
                    document.getElementById('achievementsModal').classList.add('show');
                    this.updateUI();
                });

                document.getElementById('closeModal').addEventListener('click', () => {
                    document.getElementById('achievementsModal').classList.remove('show');
                });

                document.getElementById('achievementsModal').addEventListener('click', (e) => {
                    if (e.target.id === 'achievementsModal') {
                        document.getElementById('achievementsModal').classList.remove('show');
                    }
                });

                // Popup close
                document.getElementById('popupClose').addEventListener('click', () => {
                    document.getElementById('popupNotification').classList.remove('show');
                });
            }
        };

        // Initialize achievement system
        achievementSystem.init();
    </script>
</body>
</html>